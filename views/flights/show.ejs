<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Show</title>
</head>
<body>
	<a href="/flights"> <button>View Flights</button> </a>

	<h1>Flight Information</h1>
	<h3>Airline: <%= flightDatabase.airline %></h3>
	<h3>Airport: <%= flightDatabase.airport %></h3>
    <h3>Flight Number: <%= flightDatabase.flightNo %></h3>
	<h3>Departs: <%= flightDatabase.departs %></h3>
	<h3>Arrival Destination: <%= flightDatabase.destinations.airportDest%></h3>
	<h3>Arrival Time: <%= flightDatabase.destinations.arrival %></h3>


<form id="new-dest" action="/flights/<%=flightDatabase._id%>/destinations" method="POST">
    
    <label>Airport Destination</label>
    <select name="airportDestination">
      <option value="DEN">DEN</option>
      <option value="LAX">LAX</option>
      <option value="SAN">SAN</option>
      <option value="DFW">DFW</option>
      <option value="AUS">AUS</option>
    </select>
    <br>
    <label>Arrival Date and Time:</label>
    <input type="datetime-local" name="arrival">
  
    <input type="submit" value="Add Destination">
	<br><br><br>

<% if (flightDatabase.destinations.length) { %>
	<table>
	  <thead>
		<tr>
		  <th>Airport</th>
		  <th>Arrival</th>
		</tr>
	  </thead>
	  <tbody>
		<% flightDatabase.destinations.forEach(function(d) { %>
		  <tr>
			<td><%= d.airportDestination %></td>
			<td><%= d.arrival %></td>
		  </tr>
		<% }); %>
	  </tbody>
	</table>
  <% } else { %>
	<h4>Destination(s) TBA...</h4>
  <% } %>


  <form id="add-per-to-flight" action="/flights/<%= flightDatabase._id%>/tickets" method="POST">
	<select name="ticketId">
	  <%- ticketDatabase.map(t => `<option value="${t._id}">${t.seat}</option>`).join('') %>
	</select>
	<button type="submit">Add to Flight</button>
  </form>


  <% if (ticketDatabase.length) { %>
	<table>
	  <thead>
		<tr>
		  <th>Seat</th>
		  <th>Price</th>
		</tr>
	  </thead>
	  <tbody>
		<% ticketDatabase.forEach(function(t) { %>
		  <tr>
			<td><%= t.seat %></td>
			<td><%= t.price %></td>
		  </tr>
		<% }); %>
	  </tbody>
	</table>
  <% } %>
	<h4>No passengers yet</h4>
</body>
</html>